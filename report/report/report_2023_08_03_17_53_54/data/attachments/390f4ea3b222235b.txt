INFO     root:test_cases.py:43 ==========执行用例START：querySyslogRuleDetail==========
INFO     root:runcase.py:42 -·-·-·-·-·-·-·-·-·-执行用例 START：查看syslog规则详情-·-·-·-·-·-·-·-·-·-
INFO     root:runcase.py:69 -·-·-·-·-·-·-·-·-·-执行接口 START：添加统一平台审计日志syslog规则-·-·-·-·-·-·-·-·-·-
INFO     root:handleyaml.py:84 Yaml测试用例基础架构检查通过
INFO     root:runcase.py:85 重组后的用例信息：{'api_name': '添加syslog列表', 'base_url': 'https://192.168.148.174:31000', 'request': {'method': 'POST', 'address': '/api/auth/v1/syslog/addSyslogRule', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}, 'data': {'ruleName': '自动化测试统一平台审计日志规则', 'sendType': '1', 'protocol': 'tcp', 'level': '6', 'type': '0', 'charCode': 'UTF-8', 'timeFormatter': '3', 'logPrefix': '统一平台syslog', 'customSeprChar': '+', 'serverInfos': '[{"ip":"192.168.154.7","port":"514"}]', 'syslogFields': '[{"metadataId":1000001,"fieldName":"createTime","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":0},{"metadataId":1000002,"fieldName":"adminName","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":1},{"metadataId":1000003,"fieldName":"sourceIp","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":2}]', 'appCode': 'system_admin_log_audit'}}, 'name': '添加统一平台审计日志syslog规则', 'description': '添加统一平台审计日志syslog规则', 'preProcessors': {'database': [{'type': 'mysql', 'sql': "delete from `bms-general-aa`.t_syslog_rule_info where ruleName like '自动化测试统一平台审计日志规则%';"}, {'type': 'mysql', 'sql': "delete from `bms-general-aa`.t_syslog_server_info where syslogRuleId in (select id from `bms-general-aa`.t_syslog_rule_info tsri where  ruleName like '自动化测试统一平台审计日志规则%');"}, {'type': 'mysql', 'sql': "delete from `bms-general-aa`.t_syslog_rule_fields_info where syslogRuleId in (select id from `bms-general-aa`.t_syslog_rule_info tsri where  ruleName like '自动化测试统一平台审计日志规则%');"}]}, 'postProcessors': {'assert': {'code': 200, 'response': {'result': 0, 'resultDesc': '操作成功', 'entityKey': 0}}}}
INFO     root:runcase.py:123 请求地址：https://192.168.148.174:31000/api/auth/v1/syslog/addSyslogRule
INFO     root:runcase.py:124 请求方法：POST
INFO     root:runcase.py:125 请求头：{'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}
INFO     root:runcase.py:135 请求参数：{'ruleName': '自动化测试统一平台审计日志规则', 'sendType': '1', 'protocol': 'tcp', 'level': '6', 'type': '0', 'charCode': 'UTF-8', 'timeFormatter': '3', 'logPrefix': '统一平台syslog', 'customSeprChar': '+', 'serverInfos': '[{"ip":"192.168.154.7","port":"514"}]', 'syslogFields': '[{"metadataId":1000001,"fieldName":"createTime","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":0},{"metadataId":1000002,"fieldName":"adminName","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":1},{"metadataId":1000003,"fieldName":"sourceIp","indexPrefix":"system_admin_log_audit","platformId":"1","sortNum":2}]', 'appCode': 'system_admin_log_audit'}
INFO     root:runcase.py:197 请求接口结果： {'result': 0, 'resultDesc': '操作成功', 'entityKey': 0}
INFO     root:checkresult.py:152 code断言通过, 期望状态码:200, 实际状态码:200
INFO     root:checkresult.py:87 返回结果断言通过, 期望返回值:{'result': 0, 'resultDesc': '操作成功', 'entityKey': 0}, 实际返回值:{'result': 0, 'resultDesc': '操作成功', 'entityKey': 0}
INFO     root:runcase.py:102 -·-·-·-·-·-·-·-·-·-执行接口 END：添加统一平台审计日志syslog规则-·-·-·-·-·-·-·-·-·-
INFO     root:runcase.py:69 -·-·-·-·-·-·-·-·-·-执行接口 START：查看syslog规则集合-根据规则名称筛选-·-·-·-·-·-·-·-·-·-
INFO     root:handleyaml.py:84 Yaml测试用例基础架构检查通过
INFO     root:runcase.py:85 重组后的用例信息：{'api_name': '查看syslog规则集合', 'base_url': 'https://192.168.148.174:31000', 'request': {'method': 'POST', 'address': '/api/auth/v1/syslog/querySyslogRuleList', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}, 'data': {'ruleName': '自动化测试统一平台审计日志规则', 'page': 1, 'rows': 20}}, 'name': '查看syslog规则集合-根据规则名称筛选', 'description': '查看syslog规则集合-根据规则名称筛选', 'postProcessors': {'assert': {'code': 200, 'jsonpath': [{'path': '$.rows[0].ruleName', 'value': '自动化测试统一平台审计日志规则', 'type': 'in'}]}, 'extract': [{'name': 'id', 'jsonpath': '$.rows[0].id'}]}}
INFO     root:runcase.py:123 请求地址：https://192.168.148.174:31000/api/auth/v1/syslog/querySyslogRuleList
INFO     root:runcase.py:124 请求方法：POST
INFO     root:runcase.py:125 请求头：{'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}
INFO     root:runcase.py:135 请求参数：{'ruleName': '自动化测试统一平台审计日志规则', 'page': 1, 'rows': 20}
INFO     root:runcase.py:197 请求接口结果： {'total': 1, 'rows': [{'id': 89, 'modifyTime': '2023-08-03 17:48:11', 'ruleName': '自动化测试统一平台审计日志规则', 'sendType': 1, 'level': 6, 'type': 0, 'charCode': 'UTF-8', 'customSeprChar': '+', 'timeFormatter': 3, 'logPrefix': '统一平台syslog', 'status': 0, 'createUser': 'admin', 'modifyUser': 'admin', 'protocol': 'tcp', 'serverInfoEntityList': [{'id': 131, 'syslogRuleId': 89, 'modifyTime': '2023-08-03 17:48:12', 'ip': '192.168.154.7', 'port': 514}], 'syslogFieldsInfoEntityList': [{'id': 348, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000001, 'fieldName': 'createTime', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 0, 'platformId': '1', 'metadataName': '创建时间'}, {'id': 349, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000002, 'fieldName': 'adminName', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 1, 'platformId': '1', 'metadataName': '管理员账户名'}, {'id': 350, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000003, 'fieldName': 'sourceIp', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 2, 'platformId': '1', 'metadataName': '源ip'}]}]}
INFO     root:checkresult.py:152 code断言通过, 期望状态码:200, 实际状态码:200
INFO     root:checkresult.py:130 json断言通过, 期望结果'{'path': '$.rows[0].ruleName', 'value': '自动化测试统一平台审计日志规则', 'type': 'in'}', 实际结果'{'total': 1, 'rows': [{'id': 89, 'modifyTime': '2023-08-03 17:48:11', 'ruleName': '自动化测试统一平台审计日志规则', 'sendType': 1, 'level': 6, 'type': 0, 'charCode': 'UTF-8', 'customSeprChar': '+', 'timeFormatter': 3, 'logPrefix': '统一平台syslog', 'status': 0, 'createUser': 'admin', 'modifyUser': 'admin', 'protocol': 'tcp', 'serverInfoEntityList': [{'id': 131, 'syslogRuleId': 89, 'modifyTime': '2023-08-03 17:48:12', 'ip': '192.168.154.7', 'port': 514}], 'syslogFieldsInfoEntityList': [{'id': 348, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000001, 'fieldName': 'createTime', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 0, 'platformId': '1', 'metadataName': '创建时间'}, {'id': 349, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000002, 'fieldName': 'adminName', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 1, 'platformId': '1', 'metadataName': '管理员账户名'}, {'id': 350, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000003, 'fieldName': 'sourceIp', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 2, 'platformId': '1', 'metadataName': '源ip'}]}]}'
INFO     root:runcase.py:102 -·-·-·-·-·-·-·-·-·-执行接口 END：查看syslog规则集合-根据规则名称筛选-·-·-·-·-·-·-·-·-·-
INFO     root:runcase.py:69 -·-·-·-·-·-·-·-·-·-执行接口 START：查看syslog规则详情-·-·-·-·-·-·-·-·-·-
INFO     root:handleyaml.py:84 Yaml测试用例基础架构检查通过
INFO     root:runcase.py:85 重组后的用例信息：{'api_name': '查看syslog规则详情', 'base_url': 'https://192.168.148.174:31000', 'request': {'method': 'POST', 'address': '/api/auth/v1/syslog/querySyslogRuleDetail', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}, 'data': {'id': '89'}}, 'name': '查看syslog规则详情', 'description': '查看syslog规则详情', 'postProcessors': {'assert': {'code': 200, 'response': {'id': '89'}, 'jsonpath': [{'path': '$.ruleName', 'value': '自动化测试统一平台审计日志规则', 'type': 'in'}]}}}
INFO     root:runcase.py:123 请求地址：https://192.168.148.174:31000/api/auth/v1/syslog/querySyslogRuleDetail
INFO     root:runcase.py:124 请求方法：POST
INFO     root:runcase.py:125 请求头：{'Content-Type': 'application/x-www-form-urlencoded', 'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJhcHBsaWNhdGlvbiIsInN1YiI6ImY0NGEwNWRkLTE0MjMtNDg2My04YjczLWU3OWIzNWUwMmY2NyIsImlzcyI6ImJtc19zZXJ2ZXIiLCJzZXNzaW9uSWQiOiJmNDRhMDVkZC0xNDIzLTQ4NjMtOGI3My1lNzliMzVlMDJmNjciLCJleHAiOjE2OTEyMzU4MjUsImlhdCI6MTY5MTA1NTgyNX0.kkcBwDevuks2JY3ibi8YYWVBYLUU1nNHln4MqSZQN2M3Dots5SlPVmwILTdLXOUgfIdbpI6pWITBr3a81tNa2A', 'Referer': 'https://192.168.148.174:31000/sub-app-unity/syslogManage'}
INFO     root:runcase.py:135 请求参数：{'id': '89'}
INFO     root:runcase.py:197 请求接口结果： {'id': 89, 'modifyTime': '2023-08-03 17:48:11', 'ruleName': '自动化测试统一平台审计日志规则', 'sendType': 1, 'level': 6, 'type': 0, 'charCode': 'UTF-8', 'customSeprChar': '+', 'timeFormatter': 3, 'logPrefix': '统一平台syslog', 'status': 0, 'createUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'modifyUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'appCode': 'system_admin_log_audit', 'protocol': 'tcp', 'platformId': '1', 'serverInfoEntityList': [{'id': 131, 'syslogRuleId': 89, 'modifyTime': '2023-08-03 17:48:12', 'ip': '192.168.154.7', 'port': 514}], 'syslogFieldsInfoEntityList': [{'id': 348, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000001, 'fieldName': 'createTime', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 0, 'platformId': '1', 'metadataName': '创建时间'}, {'id': 349, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000002, 'fieldName': 'adminName', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 1, 'platformId': '1', 'metadataName': '管理员账户名'}, {'id': 350, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000003, 'fieldName': 'sourceIp', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 2, 'platformId': '1', 'metadataName': '源ip'}]}
INFO     root:checkresult.py:152 code断言通过, 期望状态码:200, 实际状态码:200
INFO     root:checkresult.py:87 返回结果断言通过, 期望返回值:{'id': '89'}, 实际返回值:{'id': 89, 'modifyTime': '2023-08-03 17:48:11', 'ruleName': '自动化测试统一平台审计日志规则', 'sendType': 1, 'level': 6, 'type': 0, 'charCode': 'UTF-8', 'customSeprChar': '+', 'timeFormatter': 3, 'logPrefix': '统一平台syslog', 'status': 0, 'createUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'modifyUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'appCode': 'system_admin_log_audit', 'protocol': 'tcp', 'platformId': '1', 'serverInfoEntityList': [{'id': 131, 'syslogRuleId': 89, 'modifyTime': '2023-08-03 17:48:12', 'ip': '192.168.154.7', 'port': 514}], 'syslogFieldsInfoEntityList': [{'id': 348, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000001, 'fieldName': 'createTime', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 0, 'platformId': '1', 'metadataName': '创建时间'}, {'id': 349, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000002, 'fieldName': 'adminName', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 1, 'platformId': '1', 'metadataName': '管理员账户名'}, {'id': 350, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000003, 'fieldName': 'sourceIp', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 2, 'platformId': '1', 'metadataName': '源ip'}]}
INFO     root:checkresult.py:130 json断言通过, 期望结果'{'path': '$.ruleName', 'value': '自动化测试统一平台审计日志规则', 'type': 'in'}', 实际结果'{'id': 89, 'modifyTime': '2023-08-03 17:48:11', 'ruleName': '自动化测试统一平台审计日志规则', 'sendType': 1, 'level': 6, 'type': 0, 'charCode': 'UTF-8', 'customSeprChar': '+', 'timeFormatter': 3, 'logPrefix': '统一平台syslog', 'status': 0, 'createUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'modifyUser': 'B5A33586-15104954-9B752AE1-53333EC10', 'appCode': 'system_admin_log_audit', 'protocol': 'tcp', 'platformId': '1', 'serverInfoEntityList': [{'id': 131, 'syslogRuleId': 89, 'modifyTime': '2023-08-03 17:48:12', 'ip': '192.168.154.7', 'port': 514}], 'syslogFieldsInfoEntityList': [{'id': 348, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000001, 'fieldName': 'createTime', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 0, 'platformId': '1', 'metadataName': '创建时间'}, {'id': 349, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000002, 'fieldName': 'adminName', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 1, 'platformId': '1', 'metadataName': '管理员账户名'}, {'id': 350, 'modifyTime': '2023-08-03 17:48:12', 'syslogRuleId': 89, 'metadataId': 1000003, 'fieldName': 'sourceIp', 'indexPrefix': 'system_admin_log_audit', 'sortNum': 2, 'platformId': '1', 'metadataName': '源ip'}]}'
INFO     root:runcase.py:102 -·-·-·-·-·-·-·-·-·-执行接口 END：查看syslog规则详情-·-·-·-·-·-·-·-·-·-
INFO     root:runcase.py:60 -·-·-·-·-·-·-·-·-·-执行用例 END：查看syslog规则详情-·-·-·-·-·-·-·-·-·-
INFO     root:test_cases.py:45 ==========执行用例END：querySyslogRuleDetail==========