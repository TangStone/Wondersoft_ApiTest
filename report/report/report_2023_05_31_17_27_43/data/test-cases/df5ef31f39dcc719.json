{"uid":"df5ef31f39dcc719","name":"test_roles_list[casedata0]","fullName":"bms.testcases.roles.test_roles_list.TestRoles#test_roles_list","historyId":"b7b64270451f636f676576a3e8e5029a","time":{"start":1685525263298,"stop":1685525263302,"duration":4},"status":"broken","statusMessage":"KeyError: 'token'","statusTrace":"self = <bms.testcases.roles.test_roles_list.TestRoles object at 0x0000023344337A60>\ncasedata = {'base_url': '${config(bms_env,host)}', 'expect': {'code': 200, 'jsonpath': [{'asserttype': '==', 'path': '$.statusCod...env,host)}/sub-app-unity/systemAdminLog', 'token': '${extract(token)}'}, 'method': 'get', 'url': '/api/auth/v1/roles'}}\n\n    @allure.story(api_data['story'])\n    @pytest.mark.parametrize(\"casedata\", api_data['case'].values())\n    def test_roles_list(self,casedata):\n        # pytest.mark.parametrize(ids=casedata['name'])\n>       case_send_data, recv_data = apisend.RequestsSend().excute_case(casedata)\n\nbms\\testcases\\roles\\test_roles_list.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\apisend.py:27: in excute_case\n    case_data = apiinit.RequestsInit().regroup_casedata(case_data)\ncommon\\apiinit.py:65: in regroup_casedata\n    casedata = replacedata.replace_value(casedata, relevance_dict)\ncommon\\replacedata.py:73: in replace_value\n    value = extract_value(i)\ncommon\\replacedata.py:30: in extract_value\n    value = handleyaml.get_yaml_value(CONFIG_DIR, index_str)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nfilepath = 'E:/Wondersoft_ApiTest/config/config.yml', expect_str = 'token'\n\n    def get_yaml_value(filepath, expect_str):\n        \"\"\"\n        获取yaml文件中的指定值\n        :param filepath: yaml文件路径\n        :param expect_str: 期望值字符串，‘bms_env,host'\n        :return:\n        \"\"\"\n        yaml_data = read_yaml_data(filepath)\n        expect_value_list = expect_str.split(',')\n        logging.info(\"yaml_data:%s\", yaml_data)\n        logging.info(\"expect_str:%s\", expect_str)\n        if isinstance(yaml_data, dict):\n            for i in expect_value_list:\n>               yaml_data = yaml_data[i]\nE               KeyError: 'token'\n\ncommon\\handleyaml.py:47: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"clear_yaml","time":{"start":1685525262971,"stop":1685525262971,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"login_init","time":{"start":1685525262971,"stop":1685525263068,"duration":97},"status":"passed","steps":[{"name":"执行当前接口用户成功登录获取token","time":{"start":1685525262976,"stop":1685525263063,"duration":87},"status":"passed","steps":[{"name":"POST请求","time":{"start":1685525262976,"stop":1685525262978,"duration":2},"status":"passed","steps":[],"attachments":[{"name":"请求地址","size":0},{"name":"请求头","size":0},{"name":"请求参数","size":0}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":3}],"attachments":[{"name":"请求结果","size":0}],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":4},{"name":"结果校验","time":{"start":1685525263063,"stop":1685525263067,"duration":4},"status":"passed","steps":[{"name":"判断状态码","time":{"start":1685525263063,"stop":1685525263064,"duration":1},"status":"passed","steps":[],"attachments":[{"name":"期望状态码","size":0},{"name":"实际状态码","size":0}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":2},{"name":"json断言判断相等","time":{"start":1685525263065,"stop":1685525263067,"duration":2},"status":"passed","steps":[],"attachments":[{"name":"期望结果","size":0},{"name":"实际实际结果","size":0}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":2}],"attachments":[],"parameters":[],"stepsCount":2,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":4}],"attachments":[],"parameters":[],"stepsCount":5,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":8},{"name":"remove_tmp","time":{"start":1685525263068,"stop":1685525263070,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"broken","statusMessage":"KeyError: 'token'","statusTrace":"self = <bms.testcases.roles.test_roles_list.TestRoles object at 0x0000023344337A60>\ncasedata = {'base_url': '${config(bms_env,host)}', 'expect': {'code': 200, 'jsonpath': [{'asserttype': '==', 'path': '$.statusCod...env,host)}/sub-app-unity/systemAdminLog', 'token': '${extract(token)}'}, 'method': 'get', 'url': '/api/auth/v1/roles'}}\n\n    @allure.story(api_data['story'])\n    @pytest.mark.parametrize(\"casedata\", api_data['case'].values())\n    def test_roles_list(self,casedata):\n        # pytest.mark.parametrize(ids=casedata['name'])\n>       case_send_data, recv_data = apisend.RequestsSend().excute_case(casedata)\n\nbms\\testcases\\roles\\test_roles_list.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\apisend.py:27: in excute_case\n    case_data = apiinit.RequestsInit().regroup_casedata(case_data)\ncommon\\apiinit.py:65: in regroup_casedata\n    casedata = replacedata.replace_value(casedata, relevance_dict)\ncommon\\replacedata.py:73: in replace_value\n    value = extract_value(i)\ncommon\\replacedata.py:30: in extract_value\n    value = handleyaml.get_yaml_value(CONFIG_DIR, index_str)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nfilepath = 'E:/Wondersoft_ApiTest/config/config.yml', expect_str = 'token'\n\n    def get_yaml_value(filepath, expect_str):\n        \"\"\"\n        获取yaml文件中的指定值\n        :param filepath: yaml文件路径\n        :param expect_str: 期望值字符串，‘bms_env,host'\n        :return:\n        \"\"\"\n        yaml_data = read_yaml_data(filepath)\n        expect_value_list = expect_str.split(',')\n        logging.info(\"yaml_data:%s\", yaml_data)\n        logging.info(\"expect_str:%s\", expect_str)\n        if isinstance(yaml_data, dict):\n            for i in expect_value_list:\n>               yaml_data = yaml_data[i]\nE               KeyError: 'token'\n\ncommon\\handleyaml.py:47: KeyError","steps":[],"attachments":[{"uid":"46e5f97a3ec9190b","name":"log","source":"46e5f97a3ec9190b.txt","type":"text/plain","size":632}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[],"labels":[{"name":"story","value":"角色列表接口"},{"name":"feature","value":"权限管理-角色配置"},{"name":"epic","value":"系统管理"},{"name":"parentSuite","value":"bms.testcases.roles"},{"name":"suite","value":"test_roles_list"},{"name":"subSuite","value":"TestRoles"},{"name":"host","value":"OFYI7JX9DURTDV6"},{"name":"thread","value":"12584-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"bms.testcases.roles.test_roles_list"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"casedata","value":"{'name': '角色列表查看', 'base_url': '${config(bms_env,host)}', 'request': {'method': 'get', 'url': '/api/auth/v1/roles', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'token': '${extract(token)}', 'Referer': '${config(bms_env,host)}/sub-app-unity/systemAdminLog'}}, 'expect': {'code': 200, 'jsonpath': [{'path': '$.statusCode', 'value': 0, 'asserttype': '=='}, {'path': '$.msg', 'value': 'success', 'asserttype': '=='}]}}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"df5ef31f39dcc719.json","parameterValues":["{'name': '角色列表查看', 'base_url': '${config(bms_env,host)}', 'request': {'method': 'get', 'url': '/api/auth/v1/roles', 'headers': {'Content-Type': 'application/x-www-form-urlencoded', 'token': '${extract(token)}', 'Referer': '${config(bms_env,host)}/sub-app-unity/systemAdminLog'}}, 'expect': {'code': 200, 'jsonpath': [{'path': '$.statusCode', 'value': 0, 'asserttype': '=='}, {'path': '$.msg', 'value': 'success', 'asserttype': '=='}]}}"]}