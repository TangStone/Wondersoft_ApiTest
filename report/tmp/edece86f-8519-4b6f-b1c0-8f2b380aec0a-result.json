{"name": "自动化测试管理员用户重置密码成功", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_cases.TestUserSync object at 0x000002684C7585E0>\ncase = 'useradminPasswdReset'\ncasedata = {'description': '自动化测试管理员用户重置密码成功', 'epic': '系统管理', 'feature': '权限管理', 'name': '自动化测试管理员用户重置密码成功', ...}\n\n    @pytest.mark.parametrize('case, casedata', readcase.ReadCase().get_case(businesscase_pathlist))\n    def test_businesscases(self, case, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========执行用例START：%s==========\", case)\n>       runcase.RunCase().excute_case(casedata)\n\ntestcases\\test_cases.py:44: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:59: in excute_case\n    self.excute_apicase(api, api_casedata)\ncommon\\runcase.py:90: in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.password', 'value': '394f481895a1c5bef3da3d0685f41453385ef0aa'}], 'sql': \"select password from `bms-general-aa`.t_sys_admin tsa where id = '9617C83D-63C64FC7-A91E7CEB-75C5831A'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "自动化测试管理员用户重置密码成功", "steps": [{"name": "新增用户组-新增成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "97d9dd0c-a56e-4ae5-87d9-7e2f32e09c6e-attachment.attach"}, {"name": "请求地址", "source": "31f04f2e-e18b-4a2e-b338-cf3363416e55-attachment.attach"}, {"name": "请求头", "source": "019b7a59-b246-477c-a53e-4ad9bb768aaf-attachment.attach"}, {"name": "请求参数", "source": "4d5c1d7c-1ff0-45ea-ab21-4aaee505242a-attachment.attach"}, {"name": "请求结果", "source": "9196e014-eb93-49c3-844a-ecca9cfb7787-attachment.attach"}], "start": 1691056392342, "stop": 1691056392420}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "a2e8ef3f-3f88-4609-9e9c-338bc2d83f42-attachment.attach"}, {"name": "实际状态码", "source": "42bbb116-8ed9-4023-9ec1-83b249c100c2-attachment.attach"}], "start": 1691056392420, "stop": 1691056392421}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "69740336-27eb-41ea-9d1a-faa8b6c5a0e7-attachment.attach"}, {"name": "实际返回值", "source": "615ad1da-32e2-4b08-8a03-3e159380de45-attachment.attach"}], "start": 1691056392422, "stop": 1691056392423}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "1fbcedf0-2870-482f-9e52-c5122999bd01-attachment.attach"}, {"name": "期望返回值", "source": "34389266-7b89-4c47-9c16-ffc538ec48fa-attachment.attach"}, {"name": "实际返回值", "source": "666c1279-d1d3-4f1b-916b-f14cee1f7e52-attachment.attach"}], "start": 1691056392430, "stop": 1691056392432}], "start": 1691056392420, "stop": 1691056392432}], "start": 1691056392319, "stop": 1691056392432}, {"name": "搜索一级组织机构下特定用户组信息", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "27fba2e8-8fca-4fa3-b1b8-56ba3c5c5211-attachment.attach"}, {"name": "请求地址", "source": "a19da67b-b0af-4254-94b3-b9c7f5f68ac6-attachment.attach"}, {"name": "请求头", "source": "72fb852b-4b02-40c7-bef5-93930213504a-attachment.attach"}, {"name": "请求参数", "source": "89a81052-a727-469b-ac29-7cb4f81e3e1f-attachment.attach"}, {"name": "请求结果", "source": "0505e0d3-99cc-4ca3-a42b-26a0a51e763b-attachment.attach"}], "start": 1691056392443, "stop": 1691056392517}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "da81a059-7180-425a-943d-c38370c044b0-attachment.attach"}, {"name": "实际状态码", "source": "04a50ea1-9bc7-4caa-9ff5-d64eb1f2f052-attachment.attach"}], "start": 1691056392517, "stop": 1691056392518}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "0f111e11-8057-4c5e-884b-8a565854a069-attachment.attach"}, {"name": "实际返回值", "source": "385c895c-488f-4341-a556-bceac9fac166-attachment.attach"}], "start": 1691056392518, "stop": 1691056392519}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "8e192aa4-5cbd-4029-baed-13d590fa004a-attachment.attach"}, {"name": "实际实际结果", "source": "d4caf801-6f62-4a51-aabb-8bc296298c93-attachment.attach"}], "start": 1691056392520, "stop": 1691056392521}], "start": 1691056392517, "stop": 1691056392521}], "start": 1691056392441, "stop": 1691056392523}, {"name": "自建用户组新增普通职员用户成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "d1680b12-66c3-4445-b7eb-a5a0f13379f0-attachment.attach"}, {"name": "请求地址", "source": "b192045e-e521-4036-ad8e-e13582103c37-attachment.attach"}, {"name": "请求头", "source": "0d6bba0f-6b09-44cd-ba0c-a8dad9097585-attachment.attach"}, {"name": "请求参数", "source": "81388df2-fa69-4a0c-b247-13e475ea86b3-attachment.attach"}, {"name": "请求结果", "source": "49c0efd9-2be5-48cd-90f2-90629fba7d0d-attachment.attach"}], "start": 1691056392549, "stop": 1691056392631}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "3fefb2c6-21d0-4d68-9890-b67fde67fd49-attachment.attach"}, {"name": "实际状态码", "source": "c39c0d25-988c-4585-81cd-f132c5d01084-attachment.attach"}], "start": 1691056392631, "stop": 1691056392632}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "8f8dd8aa-eff2-4f47-b642-3f3c25abe253-attachment.attach"}, {"name": "实际返回值", "source": "3a8c86af-ed26-426f-8b59-ecc2ef2c74a7-attachment.attach"}], "start": 1691056392632, "stop": 1691056392633}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "a13b5514-a5ce-4879-b75a-f65e8c9e8643-attachment.attach"}, {"name": "期望返回值", "source": "967463b7-dac0-494b-9a4e-0f3b3f481f01-attachment.attach"}, {"name": "实际返回值", "source": "e0380170-c528-4e90-a259-9a0b9ff6f654-attachment.attach"}], "start": 1691056392647, "stop": 1691056392652}], "start": 1691056392631, "stop": 1691056392652}], "start": 1691056392530, "stop": 1691056392652}, {"name": "搜索自动化测试组织机构下的用户列表-根据姓名搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "7cc77792-389e-4b20-a124-1cd50b72a88f-attachment.attach"}, {"name": "请求地址", "source": "2b089566-d185-458a-a853-873f63d02eaf-attachment.attach"}, {"name": "请求头", "source": "0c74b63e-13ae-4f36-b88e-64b44820d5c8-attachment.attach"}, {"name": "请求参数", "source": "6953e57b-5d51-42b6-82aa-394e17af1c29-attachment.attach"}, {"name": "请求结果", "source": "44d130f2-16d3-4e1e-bd36-48654e791ed0-attachment.attach"}], "start": 1691056392663, "stop": 1691056392745}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "7ba57e02-64a8-4142-a6e2-60541ba2db1e-attachment.attach"}, {"name": "实际状态码", "source": "72367792-d227-4f40-ade3-c2cfa0b3e80a-attachment.attach"}], "start": 1691056392745, "stop": 1691056392746}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "fc81ad66-0046-42dd-9cab-48330187a836-attachment.attach"}, {"name": "实际返回值", "source": "a01a5bf9-403d-4ad2-bd23-32454270b89c-attachment.attach"}], "start": 1691056392746, "stop": 1691056392747}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "d3941bfe-cf42-41d2-af6e-0ebd35920eb2-attachment.attach"}, {"name": "实际实际结果", "source": "e823da44-776b-47f5-b153-5216897bced4-attachment.attach"}], "start": 1691056392747, "stop": 1691056392749}], "start": 1691056392745, "stop": 1691056392749}], "start": 1691056392661, "stop": 1691056392752}, {"name": "创建自动化测试超级管理员", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "316c6c24-98d1-4836-9a0b-a57aac41f810-attachment.attach"}, {"name": "请求地址", "source": "7dd16e87-bb66-4665-87a1-583cb4d6b5e9-attachment.attach"}, {"name": "请求头", "source": "259a4192-9577-4409-a85e-342533816df1-attachment.attach"}, {"name": "请求参数", "source": "1e2d5019-16ba-4046-9a0b-101d79beab24-attachment.attach"}, {"name": "请求结果", "source": "1bdb7e9b-b597-48b5-8c7e-9b86a3ad44bf-attachment.attach"}], "start": 1691056392766, "stop": 1691056392831}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "3a20712e-e62a-4923-a38f-e5193c91a173-attachment.attach"}, {"name": "实际状态码", "source": "dca04c79-1259-4538-9a4c-d56601d0c0d1-attachment.attach"}], "start": 1691056392831, "stop": 1691056392832}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "8ad6d979-e6f7-4b3a-ba58-e43c8517403c-attachment.attach"}, {"name": "实际返回值", "source": "733f3401-40ae-4ddf-87f2-04ebd1c9de32-attachment.attach"}], "start": 1691056392832, "stop": 1691056392833}], "start": 1691056392831, "stop": 1691056392833}], "start": 1691056392756, "stop": 1691056392833}, {"name": "管理员列表搜索-按登录名、角色名组合搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "dce14ab2-306e-4179-ab9f-ff268c54e415-attachment.attach"}, {"name": "请求地址", "source": "847c4c9c-9891-413c-aaba-0a061601335c-attachment.attach"}, {"name": "请求头", "source": "5ff57530-e459-4124-8a07-f2f4bbcae9df-attachment.attach"}, {"name": "请求参数", "source": "b870c865-7d65-4597-9303-e3f1169a6e84-attachment.attach"}, {"name": "请求结果", "source": "f8468146-0ca1-4743-9304-2bec54930886-attachment.attach"}], "start": 1691056392843, "stop": 1691056392910}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "2d603f30-4eb1-41e2-8a80-1db2b9a42011-attachment.attach"}, {"name": "实际状态码", "source": "53c6f58f-473d-4c51-ae26-42a6013db32e-attachment.attach"}], "start": 1691056392910, "stop": 1691056392911}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "cdb18bd1-202b-4c3a-8278-c2ec33809826-attachment.attach"}, {"name": "实际返回值", "source": "d77f4b00-b06a-4a48-b167-4e695dfd8339-attachment.attach"}], "start": 1691056392911, "stop": 1691056392912}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "523229f3-ed1e-475a-af64-a5e0bfbe7bff-attachment.attach"}, {"name": "实际实际结果", "source": "67e878c6-d789-4674-a079-d44716e47513-attachment.attach"}], "start": 1691056392912, "stop": 1691056392914}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "1d06c56b-6519-43e6-8d72-8065736451cf-attachment.attach"}, {"name": "实际实际结果", "source": "93559cda-9e18-45d2-8cb1-0de429117816-attachment.attach"}], "start": 1691056392914, "stop": 1691056392915}], "start": 1691056392910, "stop": 1691056392915}], "start": 1691056392841, "stop": 1691056392920}, {"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 59, in excute_case\n    self.excute_apicase(api, api_casedata)\n  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 90, in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "b0ef2204-0204-4cf7-9a2a-4452228aa594-attachment.attach"}, {"name": "请求地址", "source": "c585477b-d35a-4a7b-8a2c-b83c53e7eff9-attachment.attach"}, {"name": "请求头", "source": "c38f7707-3c49-42eb-afe6-d6acfce21d4f-attachment.attach"}, {"name": "请求参数", "source": "a153aa2c-a597-49cd-b875-644c93f4a4b3-attachment.attach"}, {"name": "请求结果", "source": "d0851424-52b6-436b-9757-24e025adc88e-attachment.attach"}], "start": 1691056392926, "stop": 1691056392982}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "a41a7681-be66-4d28-a533-2db5a59d536e-attachment.attach"}, {"name": "实际状态码", "source": "a8665c8a-3674-4f2c-8ad3-10d36318605c-attachment.attach"}], "start": 1691056392982, "stop": 1691056392983}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "32ce3c8b-825c-4abb-9707-411864556f30-attachment.attach"}, {"name": "实际返回值", "source": "679ed286-3598-49c8-8719-121bd01889c0-attachment.attach"}], "start": 1691056392983, "stop": 1691056392984}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "3ef465a5-3352-47c3-9175-8d8ce133c6f0-attachment.attach"}, {"name": "期望返回值", "source": "d62d257c-708f-4b99-80fb-f7ea419eedf3-attachment.attach"}, {"name": "实际返回值", "source": "56f12d35-6e51-46ab-be3e-95cd46d28d48-attachment.attach"}], "start": 1691056393008, "stop": 1691056393009}], "start": 1691056392982, "stop": 1691056393010}], "start": 1691056392923, "stop": 1691056393010}], "attachments": [{"name": "log", "source": "8f764e25-40a3-4dd9-8022-2fac9830a015-attachment.txt", "type": "text/plain"}], "start": 1691056392187, "stop": 1691056393010, "uuid": "455f5019-f083-4a27-9bb6-be5b46bbd5cd", "historyId": "a8eeb0ea7b5495c378bd9fe5d82caca9", "testCaseId": "2cc05bdd47264d0a6d036e2b95402968", "fullName": "testcases.test_cases.TestUserSync#test_businesscases", "labels": [{"name": "epic", "value": "系统管理"}, {"name": "feature", "value": "权限管理"}, {"name": "story", "value": "管理员配置"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_cases"}, {"name": "subSuite", "value": "TestUserSync"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "20716-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_cases"}]}