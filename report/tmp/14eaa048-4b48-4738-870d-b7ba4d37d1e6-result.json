{"name": "自动化测试管理员用户重置密码成功", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_cases.TestUserSync object at 0x000002684C7585E0>\ncase = 'useradminPasswdReset'\ncasedata = {'description': '自动化测试管理员用户重置密码成功', 'epic': '系统管理', 'feature': '权限管理', 'name': '自动化测试管理员用户重置密码成功', ...}\n\n    @pytest.mark.parametrize('case, casedata', readcase.ReadCase().get_case(businesscase_pathlist))\n    def test_businesscases(self, case, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========执行用例START：%s==========\", case)\n>       runcase.RunCase().excute_case(casedata)\n\ntestcases\\test_cases.py:44: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:59: in excute_case\n    self.excute_apicase(api, api_casedata)\ncommon\\runcase.py:90: in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.password', 'value': '394f481895a1c5bef3da3d0685f41453385ef0aa'}], 'sql': \"select password from `bms-general-aa`.t_sys_admin tsa where id = '9219ADBF-433A4813-88FEBA6C-9EF28CD2'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "自动化测试管理员用户重置密码成功", "steps": [{"name": "新增用户组-新增成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "d5a6a9c6-acb7-4a53-ab63-10685cf01a78-attachment.attach"}, {"name": "请求地址", "source": "5ff2d78c-04e9-44ba-9d33-f56346251de0-attachment.attach"}, {"name": "请求头", "source": "e9f60f7b-30d2-4680-a536-31a3d16c602a-attachment.attach"}, {"name": "请求参数", "source": "fa04134c-84d8-4bad-8235-8cdb558578bb-attachment.attach"}, {"name": "请求结果", "source": "dcc10dac-6871-40ef-ac87-10a00c80482b-attachment.attach"}], "start": 1691056386480, "stop": 1691056386557}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "2f24f9da-604e-4c3b-91fc-591cffc5a26d-attachment.attach"}, {"name": "实际状态码", "source": "765dd594-9144-4714-b851-a81b4051b68f-attachment.attach"}], "start": 1691056386557, "stop": 1691056386558}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "72d7be23-d621-4917-ad50-1357873f54c8-attachment.attach"}, {"name": "实际返回值", "source": "21f081b4-984c-4702-b560-774a9dc59f15-attachment.attach"}], "start": 1691056386558, "stop": 1691056386559}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "91d01a91-9712-4b9d-ae28-38ac0b8b9d3f-attachment.attach"}, {"name": "期望返回值", "source": "b03439f1-cc92-45b2-b503-29b4305b4a5f-attachment.attach"}, {"name": "实际返回值", "source": "4d8bd257-c885-47d6-87a2-d8768db298dc-attachment.attach"}], "start": 1691056386569, "stop": 1691056386572}], "start": 1691056386557, "stop": 1691056386572}], "start": 1691056386459, "stop": 1691056386572}, {"name": "搜索一级组织机构下特定用户组信息", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "05b801d1-195c-4598-aabd-4feb1dd96c75-attachment.attach"}, {"name": "请求地址", "source": "ca9eec7e-8e8d-4813-86b4-2d6abddbc473-attachment.attach"}, {"name": "请求头", "source": "40d6d856-b94b-4848-82f2-89f43f1d40b2-attachment.attach"}, {"name": "请求参数", "source": "089ae69b-382b-41a2-a6af-abab33122860-attachment.attach"}, {"name": "请求结果", "source": "985ec133-87b5-4424-a7ea-60270b0ab94f-attachment.attach"}], "start": 1691056386579, "stop": 1691056386636}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "549b7858-6f5b-4af6-9bb8-3e75667a3c19-attachment.attach"}, {"name": "实际状态码", "source": "90219cf2-d01c-4a76-ae0d-7b7431bda35d-attachment.attach"}], "start": 1691056386636, "stop": 1691056386637}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "64970043-8704-4a38-9623-39855666fe40-attachment.attach"}, {"name": "实际返回值", "source": "e0008671-88f9-44f1-90ad-8e9a68535894-attachment.attach"}], "start": 1691056386637, "stop": 1691056386638}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "8dd3a87a-c2a6-4669-b27c-3f444455ef33-attachment.attach"}, {"name": "实际实际结果", "source": "f625d801-d3e0-4f98-947b-3d3888ca4864-attachment.attach"}], "start": 1691056386638, "stop": 1691056386639}], "start": 1691056386636, "stop": 1691056386639}], "start": 1691056386578, "stop": 1691056386641}, {"name": "自建用户组新增普通职员用户成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "cadac896-fa4e-4bce-9292-19be27d118ea-attachment.attach"}, {"name": "请求地址", "source": "77f542cf-bac7-46d1-a95b-03d8007e8562-attachment.attach"}, {"name": "请求头", "source": "6749aa9d-5df0-4726-b5c1-a0c88766b0d9-attachment.attach"}, {"name": "请求参数", "source": "ad3b00b5-af5b-41ad-9a83-28a7ef6db3ad-attachment.attach"}, {"name": "请求结果", "source": "5c2c946f-6d36-4f70-abe8-ce770ed9b2d9-attachment.attach"}], "start": 1691056386666, "stop": 1691056386732}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "bb2dc80d-a35f-41e8-8db0-000569850b60-attachment.attach"}, {"name": "实际状态码", "source": "328aa293-43a1-43a4-861b-a0f1f3af2809-attachment.attach"}], "start": 1691056386732, "stop": 1691056386734}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "2485e9d1-58f1-4ac9-a180-508fb5e92bb7-attachment.attach"}, {"name": "实际返回值", "source": "793920a3-427c-46da-af27-d3160a9382d6-attachment.attach"}], "start": 1691056386734, "stop": 1691056386736}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "171c909b-3153-4eec-91b5-8d7c7a5e3190-attachment.attach"}, {"name": "期望返回值", "source": "611d1449-881e-4d19-9af0-235188d33ffb-attachment.attach"}, {"name": "实际返回值", "source": "399096b8-44dc-4843-9b4c-32929af24cb4-attachment.attach"}], "start": 1691056386768, "stop": 1691056386771}], "start": 1691056386732, "stop": 1691056386771}], "start": 1691056386648, "stop": 1691056386772}, {"name": "搜索自动化测试组织机构下的用户列表-根据姓名搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "740aeb47-4829-4075-b3a6-9a8de6e707cf-attachment.attach"}, {"name": "请求地址", "source": "b1b8f6c1-fd9d-48ca-aea6-20c5cd65d679-attachment.attach"}, {"name": "请求头", "source": "237420b4-5005-426a-b00a-ad551b1c9d92-attachment.attach"}, {"name": "请求参数", "source": "1145aa8c-dc0c-4088-89aa-4a8ac919610a-attachment.attach"}, {"name": "请求结果", "source": "1a646162-9937-4680-9297-93c5e7b70f9e-attachment.attach"}], "start": 1691056386792, "stop": 1691056386877}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "780dc949-d54f-48ff-a5eb-378b4d292af4-attachment.attach"}, {"name": "实际状态码", "source": "691eac93-5166-42f0-be9a-0d27f05570e9-attachment.attach"}], "start": 1691056386877, "stop": 1691056386878}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "77695806-3038-417b-93e9-20220b2e1102-attachment.attach"}, {"name": "实际返回值", "source": "6bec731f-2825-43c0-a566-65243bcb8622-attachment.attach"}], "start": 1691056386878, "stop": 1691056386879}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "50d5c98e-c1d4-4ffc-b61c-600957f9a404-attachment.attach"}, {"name": "实际实际结果", "source": "2187ad4e-74dd-48ef-8183-089e7ef3fa86-attachment.attach"}], "start": 1691056386879, "stop": 1691056386880}], "start": 1691056386877, "stop": 1691056386880}], "start": 1691056386790, "stop": 1691056386882}, {"name": "创建自动化测试超级管理员", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "3c4c2b91-2a6b-4ac0-bca2-bd843bb2dfd3-attachment.attach"}, {"name": "请求地址", "source": "a04a919b-6b1b-45f7-8e34-ca2e548c7bc2-attachment.attach"}, {"name": "请求头", "source": "f403948a-3094-473e-9cb0-4981f770b572-attachment.attach"}, {"name": "请求参数", "source": "bb495522-a7ba-47ae-a528-cf0f8529a430-attachment.attach"}, {"name": "请求结果", "source": "47529c9f-4cac-40ec-97c8-1f35991b8f42-attachment.attach"}], "start": 1691056386917, "stop": 1691056386979}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "f0f640fc-dce9-44f5-b598-c92ab676c162-attachment.attach"}, {"name": "实际状态码", "source": "630c9304-1087-40e5-84ea-2eef47d3cc21-attachment.attach"}], "start": 1691056386979, "stop": 1691056386980}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "b3ed2b9b-b201-4c62-aba8-01702afdd605-attachment.attach"}, {"name": "实际返回值", "source": "1f663f4a-a935-4f29-bb51-520fea3f8d94-attachment.attach"}], "start": 1691056386980, "stop": 1691056386982}], "start": 1691056386979, "stop": 1691056386982}], "start": 1691056386887, "stop": 1691056386982}, {"name": "管理员列表搜索-按登录名、角色名组合搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "ff69aefa-144b-4fad-9a08-5b520e9584cf-attachment.attach"}, {"name": "请求地址", "source": "3486bb5b-5c27-48e7-aaf9-a3833adb0d82-attachment.attach"}, {"name": "请求头", "source": "b8b2422c-c5ce-4efc-a7a3-66fed5555786-attachment.attach"}, {"name": "请求参数", "source": "3399e5cc-31f3-4a92-b9bf-9041f6e875fd-attachment.attach"}, {"name": "请求结果", "source": "bcf443e6-24c0-4b03-bb4a-f4b69ae48d82-attachment.attach"}], "start": 1691056386993, "stop": 1691056387066}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "d928ff8a-3b40-4dc6-a3a9-0daa8bd54da7-attachment.attach"}, {"name": "实际状态码", "source": "4836319c-e5c7-47cb-b58c-b96d6516dcfe-attachment.attach"}], "start": 1691056387066, "stop": 1691056387071}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "0b163fb6-6f95-49ad-a0e2-7985f2bc5da1-attachment.attach"}, {"name": "实际返回值", "source": "d5fc5e47-b110-4aab-8f41-11d90be4ade8-attachment.attach"}], "start": 1691056387072, "stop": 1691056387073}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "a36c4469-ae4e-4145-8f4b-b2cf384ef459-attachment.attach"}, {"name": "实际实际结果", "source": "4e754eaf-3b9f-41a2-9659-ab31056b4c6a-attachment.attach"}], "start": 1691056387073, "stop": 1691056387077}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "cfa1964f-a9e6-466b-8c39-36ed7ad6ddc5-attachment.attach"}, {"name": "实际实际结果", "source": "1ea007bd-d57c-42f5-aecb-02dec85fdcfd-attachment.attach"}], "start": 1691056387077, "stop": 1691056387081}], "start": 1691056387066, "stop": 1691056387081}], "start": 1691056386991, "stop": 1691056387086}, {"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 59, in excute_case\n    self.excute_apicase(api, api_casedata)\n  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 90, in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "35ad3ab2-7f38-4e8d-b2bc-77b8b70561c8-attachment.attach"}, {"name": "请求地址", "source": "06e87181-9df3-4b94-9e17-8fc56db972ad-attachment.attach"}, {"name": "请求头", "source": "c8734180-a136-41aa-b92d-344c8f8ed230-attachment.attach"}, {"name": "请求参数", "source": "0b1d6af0-c9d7-4e0e-a383-cefad3b8e684-attachment.attach"}, {"name": "请求结果", "source": "b1fc2ac0-98fa-4cc6-8710-a9b4a95879b8-attachment.attach"}], "start": 1691056387093, "stop": 1691056387151}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "582a0446-21d0-42ac-a527-445d7dba5f92-attachment.attach"}, {"name": "实际状态码", "source": "bc64767f-9367-42f4-b6c3-b2ab464721b4-attachment.attach"}], "start": 1691056387151, "stop": 1691056387152}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "9cb5462c-c30b-4658-b13b-b00faf0cb68b-attachment.attach"}, {"name": "实际返回值", "source": "89305c8f-c3e8-45a4-ac28-8da42ec2eba0-attachment.attach"}], "start": 1691056387152, "stop": 1691056387153}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "4e9afea2-4eaa-42c1-b797-34f88dea68ea-attachment.attach"}, {"name": "期望返回值", "source": "7931c7df-20fb-4618-a8b3-e0dead184729-attachment.attach"}, {"name": "实际返回值", "source": "29681f29-ffc7-4d91-ac60-ceb820161adf-attachment.attach"}], "start": 1691056387157, "stop": 1691056387159}], "start": 1691056387151, "stop": 1691056387159}], "start": 1691056387091, "stop": 1691056387159}], "attachments": [{"name": "log", "source": "b9dbf2e5-0dad-42e0-b88c-34d42da58f07-attachment.txt", "type": "text/plain"}], "start": 1691056386293, "stop": 1691056387159, "uuid": "90901d42-99cc-4f40-9cc8-a80d1312a73f", "historyId": "a8eeb0ea7b5495c378bd9fe5d82caca9", "testCaseId": "2cc05bdd47264d0a6d036e2b95402968", "fullName": "testcases.test_cases.TestUserSync#test_businesscases", "labels": [{"name": "epic", "value": "系统管理"}, {"name": "feature", "value": "权限管理"}, {"name": "story", "value": "管理员配置"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_cases"}, {"name": "subSuite", "value": "TestUserSync"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "20716-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_cases"}]}