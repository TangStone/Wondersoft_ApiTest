{"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_cases.TestUserSync object at 0x000002684C758BE0>\ncase = 'useradminPasswdUpdate'\ncasedata = {'description': '自动化测试管理员用户修改密码成功', 'epic': '系统管理', 'feature': '权限管理', 'name': '自动化测试管理员用户修改密码成功', ...}\n\n    @pytest.mark.parametrize('case, casedata', readcase.ReadCase().get_case(businesscase_pathlist))\n    def test_businesscases(self, case, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========执行用例START：%s==========\", case)\n>       runcase.RunCase().excute_case(casedata)\n\ntestcases\\test_cases.py:44: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:59: in excute_case\n    self.excute_apicase(api, api_casedata)\ncommon\\runcase.py:90: in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.password', 'value': '394f481895a1c5bef3da3d0685f41453385ef0aa'}], 'sql': \"select password from `bms-general-aa`.t_sys_admin tsa where id = '7CC90AA1-9F494A54-BEC6C750-0C40D625'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "自动化测试管理员用户修改密码成功", "steps": [{"name": "新增用户组-新增成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "98c233ff-353b-4d75-8709-83d28bb0e62a-attachment.attach"}, {"name": "请求地址", "source": "82e435af-a24c-4c1f-94f1-72c5cee06c8a-attachment.attach"}, {"name": "请求头", "source": "80a0856e-fbcd-4ffa-97d1-60865ebcd17a-attachment.attach"}, {"name": "请求参数", "source": "89a0db37-907a-4ac1-99ed-7644845dbc92-attachment.attach"}, {"name": "请求结果", "source": "1613c220-a741-4317-a1de-653177316daf-attachment.attach"}], "start": 1691056362042, "stop": 1691056362105}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "520c03e6-8ffa-4fd0-9560-aa728089b7f8-attachment.attach"}, {"name": "实际状态码", "source": "eceea5a0-136f-47cb-b5d0-1d65186996dc-attachment.attach"}], "start": 1691056362106, "stop": 1691056362106}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "a6dceca2-3734-4817-8122-db026d780e8e-attachment.attach"}, {"name": "实际返回值", "source": "b44f448f-96bb-4c06-a84f-7a263c3215ed-attachment.attach"}], "start": 1691056362106, "stop": 1691056362108}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "77c0fc12-8bb7-48ec-ada1-41d1abfde7a3-attachment.attach"}, {"name": "期望返回值", "source": "db9b94db-e050-4690-becb-18b4e717293d-attachment.attach"}, {"name": "实际返回值", "source": "cb8053c2-d7e1-4119-ba72-b79c703f3ac2-attachment.attach"}], "start": 1691056362114, "stop": 1691056362116}], "start": 1691056362106, "stop": 1691056362116}], "start": 1691056361997, "stop": 1691056362117}, {"name": "搜索一级组织机构下特定用户组信息", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "0b54b8b1-40a0-42a8-8ea5-1d371ed63d4b-attachment.attach"}, {"name": "请求地址", "source": "432fab3e-dc3d-4ca3-8e83-c79280a90223-attachment.attach"}, {"name": "请求头", "source": "ef88a014-477c-4388-8d17-4c994c93a5f6-attachment.attach"}, {"name": "请求参数", "source": "ac8a5e61-68b5-490a-b4f7-b76a1018f376-attachment.attach"}, {"name": "请求结果", "source": "fce0d52a-01a0-41fd-b0a7-ab1ebc8e92c5-attachment.attach"}], "start": 1691056362127, "stop": 1691056362192}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "12ac159c-7b72-4cd7-af3b-e54647c65914-attachment.attach"}, {"name": "实际状态码", "source": "4c9de15c-61ff-4fbf-8b93-b4e49d3afcb5-attachment.attach"}], "start": 1691056362192, "stop": 1691056362193}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "27f94759-04e7-4f30-84e0-786c82f3ee61-attachment.attach"}, {"name": "实际返回值", "source": "2139f817-f8c6-4e65-aa19-acf4fea648dc-attachment.attach"}], "start": 1691056362193, "stop": 1691056362194}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "f4511009-1f44-4ca2-99c4-5b7d6fa5823e-attachment.attach"}, {"name": "实际实际结果", "source": "7149776f-6ab1-40f6-b2cc-8ab7a7b1aa16-attachment.attach"}], "start": 1691056362194, "stop": 1691056362195}], "start": 1691056362192, "stop": 1691056362195}], "start": 1691056362125, "stop": 1691056362197}, {"name": "自建用户组新增普通职员用户成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "ec1d7388-48b8-47a1-b5c1-f38d32ec1503-attachment.attach"}, {"name": "请求地址", "source": "2f5cef03-886c-4377-95f7-5f4d9413ab67-attachment.attach"}, {"name": "请求头", "source": "d97fe913-6588-4fec-bc3e-fd96584b5923-attachment.attach"}, {"name": "请求参数", "source": "b4bb3db1-7c0e-4e5b-b19a-eefa2be6b455-attachment.attach"}, {"name": "请求结果", "source": "51b0de57-3f74-4583-a0f1-75068e84f877-attachment.attach"}], "start": 1691056362236, "stop": 1691056362302}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "4b9ffc0b-7ffc-4d8e-9a40-0ecb7dd9fb5a-attachment.attach"}, {"name": "实际状态码", "source": "b97dcdf9-8fa3-41e9-8d2f-35593ae9c903-attachment.attach"}], "start": 1691056362302, "stop": 1691056362303}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "7ca0c2ce-6fc2-4441-93aa-8badf5d645ce-attachment.attach"}, {"name": "实际返回值", "source": "032bbf99-318d-43de-aa5b-486407bed15a-attachment.attach"}], "start": 1691056362303, "stop": 1691056362304}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "58d00a2f-4631-49b9-a152-7e635e2ed4b5-attachment.attach"}, {"name": "期望返回值", "source": "a1e941b4-ad64-4f07-a508-e149cac2b1f0-attachment.attach"}, {"name": "实际返回值", "source": "7956c1be-bc95-4ac4-8429-819fab628647-attachment.attach"}], "start": 1691056362317, "stop": 1691056362320}], "start": 1691056362302, "stop": 1691056362320}], "start": 1691056362204, "stop": 1691056362321}, {"name": "搜索自动化测试组织机构下的用户列表-根据姓名搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "959cd5ab-6886-4203-ae68-1ef1d6b57b7d-attachment.attach"}, {"name": "请求地址", "source": "8f7db4b5-eb69-4106-a6d1-a966fde70542-attachment.attach"}, {"name": "请求头", "source": "0b1cf6c6-eb89-476c-87c6-8e0cb57bce15-attachment.attach"}, {"name": "请求参数", "source": "39ac8b6e-b5ba-40fe-898e-c8d14cdff744-attachment.attach"}, {"name": "请求结果", "source": "f823a912-5e81-4351-879a-83090352f0b0-attachment.attach"}], "start": 1691056362341, "stop": 1691056362426}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "c2a770dc-c5dc-4798-a0b5-54e48714e6e1-attachment.attach"}, {"name": "实际状态码", "source": "09105396-1ece-486a-8659-ab2d79af1fcd-attachment.attach"}], "start": 1691056362426, "stop": 1691056362427}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "67254233-88da-485f-805b-c02a4a175ed1-attachment.attach"}, {"name": "实际返回值", "source": "95efbd5a-57db-405c-8a33-edcc903ddf73-attachment.attach"}], "start": 1691056362427, "stop": 1691056362428}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "5040beb4-95e6-471d-9687-e513fdc194ed-attachment.attach"}, {"name": "实际实际结果", "source": "bbd7d129-61fe-48ad-b25b-3fdd59e682f6-attachment.attach"}], "start": 1691056362428, "stop": 1691056362429}], "start": 1691056362426, "stop": 1691056362429}], "start": 1691056362339, "stop": 1691056362432}, {"name": "创建自动化测试超级管理员", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "91c7a532-406d-4cad-9351-203908864488-attachment.attach"}, {"name": "请求地址", "source": "fc876bd1-dd7b-46b8-80d5-e1622a6773db-attachment.attach"}, {"name": "请求头", "source": "4b06bd5c-715f-44b8-9fc4-7f108c42ca70-attachment.attach"}, {"name": "请求参数", "source": "0da966a4-2be9-4443-a0aa-e5c2965e0f26-attachment.attach"}, {"name": "请求结果", "source": "89f5ea1d-7a1c-417f-bacc-3e4baeb10f89-attachment.attach"}], "start": 1691056362446, "stop": 1691056362510}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "a588a132-d41b-440b-9d03-ee590846b531-attachment.attach"}, {"name": "实际状态码", "source": "a5baf6f8-1a22-4e4a-a513-458b2245c83e-attachment.attach"}], "start": 1691056362510, "stop": 1691056362511}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "4701dedd-3674-478c-8e44-323e4ea005c7-attachment.attach"}, {"name": "实际返回值", "source": "bb44f36c-7df4-4335-bace-2ccde4eab443-attachment.attach"}], "start": 1691056362511, "stop": 1691056362512}], "start": 1691056362510, "stop": 1691056362512}], "start": 1691056362436, "stop": 1691056362513}, {"name": "管理员列表搜索-按登录名、角色名组合搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "8e21aa52-dd1b-44b2-ba83-6f08ba11acc8-attachment.attach"}, {"name": "请求地址", "source": "b363e248-1ea3-4e59-80b9-660c4f880154-attachment.attach"}, {"name": "请求头", "source": "31fd3ae2-d33d-4b92-93ca-a95e9f855549-attachment.attach"}, {"name": "请求参数", "source": "410c7b2d-3df4-4759-885e-899f4c46a550-attachment.attach"}, {"name": "请求结果", "source": "6e0824ea-8ad5-421c-ac7a-97f792c9e05b-attachment.attach"}], "start": 1691056362524, "stop": 1691056362594}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "7586fce7-8cdd-481a-a05b-fbf52196537d-attachment.attach"}, {"name": "实际状态码", "source": "824c4f52-acfb-45d8-a620-100054b97ac0-attachment.attach"}], "start": 1691056362595, "stop": 1691056362596}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "9ac9fdb7-22e2-4881-9c23-d612d7c09535-attachment.attach"}, {"name": "实际返回值", "source": "d33bbfde-2e75-45bf-b99a-6978a1573dd0-attachment.attach"}], "start": 1691056362596, "stop": 1691056362597}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "b17cba6e-0681-42a3-82ec-acab9bdc07bb-attachment.attach"}, {"name": "实际实际结果", "source": "65d2647d-1436-46fd-b89c-58117bad5d9f-attachment.attach"}], "start": 1691056362597, "stop": 1691056362598}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "f48e5456-7494-4a64-81a8-0436b88a8da5-attachment.attach"}, {"name": "实际实际结果", "source": "4751e20b-5df8-4bdd-a0c6-27fdb8e86bd0-attachment.attach"}], "start": 1691056362598, "stop": 1691056362602}], "start": 1691056362595, "stop": 1691056362602}], "start": 1691056362522, "stop": 1691056362605}, {"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 59, in excute_case\n    self.excute_apicase(api, api_casedata)\n  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 90, in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "6fd93ae0-c540-41d5-9972-1fd4ce207887-attachment.attach"}, {"name": "请求地址", "source": "b27195f7-6524-47cd-b00b-14ae6915c8ad-attachment.attach"}, {"name": "请求头", "source": "0c40fab7-783a-4c6f-a9f0-fcd9e22d43ef-attachment.attach"}, {"name": "请求参数", "source": "ef23582e-924c-4387-8ff2-e0a11f59df19-attachment.attach"}, {"name": "请求结果", "source": "33d3f50d-53da-444e-9834-130edba1de85-attachment.attach"}], "start": 1691056362613, "stop": 1691056362665}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "31d9bc60-761f-416d-be15-8243aec519ec-attachment.attach"}, {"name": "实际状态码", "source": "15c82a97-7c10-46b6-a117-30e256c80a65-attachment.attach"}], "start": 1691056362665, "stop": 1691056362666}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "4d76832a-0baa-4bb5-9bb0-91541f12f33d-attachment.attach"}, {"name": "实际返回值", "source": "7dcc9eea-0137-4efa-9490-d25b6080ec9a-attachment.attach"}], "start": 1691056362666, "stop": 1691056362667}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "87d252b4-48d0-40de-9789-9aa40ad95166-attachment.attach"}, {"name": "期望返回值", "source": "f5276c38-14b5-46d0-b5b0-b9cee0d3db70-attachment.attach"}, {"name": "实际返回值", "source": "d8084a35-f75c-43d3-b464-89154946a1ec-attachment.attach"}], "start": 1691056362672, "stop": 1691056362673}], "start": 1691056362665, "stop": 1691056362673}], "start": 1691056362609, "stop": 1691056362673}], "attachments": [{"name": "log", "source": "203b3c89-2c10-428b-8ae1-35bd15cd8074-attachment.txt", "type": "text/plain"}], "start": 1691056361854, "stop": 1691056362674, "uuid": "66887800-fbb7-4010-a992-4918d6be5421", "historyId": "e487978c9a339317a4f7eb0ab1418ddc", "testCaseId": "2cc05bdd47264d0a6d036e2b95402968", "fullName": "testcases.test_cases.TestUserSync#test_businesscases", "labels": [{"name": "epic", "value": "系统管理"}, {"name": "feature", "value": "权限管理"}, {"name": "story", "value": "管理员配置"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_cases"}, {"name": "subSuite", "value": "TestUserSync"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "20716-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_cases"}]}