{"name": "自动化测试管理员用户重置密码成功", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_cases.TestUserSync object at 0x000002684C7585E0>\ncase = 'useradminPasswdReset'\ncasedata = {'description': '自动化测试管理员用户重置密码成功', 'epic': '系统管理', 'feature': '权限管理', 'name': '自动化测试管理员用户重置密码成功', ...}\n\n    @pytest.mark.parametrize('case, casedata', readcase.ReadCase().get_case(businesscase_pathlist))\n    def test_businesscases(self, case, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========执行用例START：%s==========\", case)\n>       runcase.RunCase().excute_case(casedata)\n\ntestcases\\test_cases.py:44: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:59: in excute_case\n    self.excute_apicase(api, api_casedata)\ncommon\\runcase.py:90: in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.password', 'value': '394f481895a1c5bef3da3d0685f41453385ef0aa'}], 'sql': \"select password from `bms-general-aa`.t_sys_admin tsa where id = '239C08F1-ECA34A1A-B3DFF1E9-F5C62E9D'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "自动化测试管理员用户重置密码成功", "steps": [{"name": "新增用户组-新增成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "fb605689-00f9-4663-9d59-5072d39c028b-attachment.attach"}, {"name": "请求地址", "source": "d5a24241-6fde-4e5d-9e25-49f2ced11bce-attachment.attach"}, {"name": "请求头", "source": "6db73ef4-0323-4dfb-9fb3-5cd27cbdb674-attachment.attach"}, {"name": "请求参数", "source": "4fc20a46-5a4c-40a8-901e-3d499eb4325d-attachment.attach"}, {"name": "请求结果", "source": "57d7ba10-bd48-4f07-8549-ccad9862439e-attachment.attach"}], "start": 1691056380573, "stop": 1691056380657}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "8ac29e85-a31d-4a38-aeac-b34394702faa-attachment.attach"}, {"name": "实际状态码", "source": "bcca9c28-82b8-429c-af15-3bb6b3b59b25-attachment.attach"}], "start": 1691056380657, "stop": 1691056380658}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "25d955da-7fe5-435c-a690-0439e543f2e0-attachment.attach"}, {"name": "实际返回值", "source": "288fb3bf-12c8-49e4-8608-8b13aacfaac2-attachment.attach"}], "start": 1691056380658, "stop": 1691056380658}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "404e8556-2b57-4b4e-bb73-98b01273c889-attachment.attach"}, {"name": "期望返回值", "source": "8c091944-6a7c-4384-9824-4d577f529e81-attachment.attach"}, {"name": "实际返回值", "source": "1626d432-5b7f-44ee-9764-cad9714fd12d-attachment.attach"}], "start": 1691056380678, "stop": 1691056380679}], "start": 1691056380657, "stop": 1691056380679}], "start": 1691056380535, "stop": 1691056380679}, {"name": "搜索一级组织机构下特定用户组信息", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "9106f3fa-6ec7-4a1d-9b2f-f8bd9c155452-attachment.attach"}, {"name": "请求地址", "source": "5873336a-cffb-4af0-ad4a-92d741d0d3e1-attachment.attach"}, {"name": "请求头", "source": "0e88a146-5b17-4b99-84ef-20f19c42f17d-attachment.attach"}, {"name": "请求参数", "source": "791f5dc9-5178-4947-8c2b-60ca0932da01-attachment.attach"}, {"name": "请求结果", "source": "6a5fb96c-17c7-4df2-b505-9c0dcd2ea415-attachment.attach"}], "start": 1691056380686, "stop": 1691056380742}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "1972fcbd-57d7-4231-925c-faabde3449f4-attachment.attach"}, {"name": "实际状态码", "source": "80c5199c-bbd9-4350-80c3-41ba4a265b1a-attachment.attach"}], "start": 1691056380742, "stop": 1691056380743}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "1aa50353-de8c-40cf-9cea-f4943ac4a478-attachment.attach"}, {"name": "实际返回值", "source": "2b81ae16-70e2-49f4-a67a-cf02c9857712-attachment.attach"}], "start": 1691056380743, "stop": 1691056380743}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "7937643c-bcec-485f-9a77-7356d94ea04b-attachment.attach"}, {"name": "实际实际结果", "source": "6f0e050e-5423-4f72-8d16-608008f04325-attachment.attach"}], "start": 1691056380744, "stop": 1691056380744}], "start": 1691056380742, "stop": 1691056380744}], "start": 1691056380685, "stop": 1691056380747}, {"name": "自建用户组新增普通职员用户成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "0ce9f434-60f2-4134-91a7-fe32f447ea05-attachment.attach"}, {"name": "请求地址", "source": "e3bcfecf-5f15-445b-a584-54698ecea7ee-attachment.attach"}, {"name": "请求头", "source": "934ec8f9-4d62-4754-95e1-45d42f9ed75f-attachment.attach"}, {"name": "请求参数", "source": "3ee8728a-037a-463d-ae82-11b4118706ce-attachment.attach"}, {"name": "请求结果", "source": "8e54da60-ac03-480e-a4d9-f04f58fb1a16-attachment.attach"}], "start": 1691056380796, "stop": 1691056380878}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "304c9a63-5d49-4d0b-948b-0d581f5fed44-attachment.attach"}, {"name": "实际状态码", "source": "55d8b372-673f-4c1e-963a-b526c330789f-attachment.attach"}], "start": 1691056380878, "stop": 1691056380879}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "7577a369-dd87-4e23-95d5-e8c4c01e7b53-attachment.attach"}, {"name": "实际返回值", "source": "c38a284f-0b52-413b-a7c3-0a7cf5ed87e3-attachment.attach"}], "start": 1691056380879, "stop": 1691056380880}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "40d5adc6-2b41-4985-876f-e5c16414d7a0-attachment.attach"}, {"name": "期望返回值", "source": "96f24c5e-ff3a-4be7-843c-def602e6fb42-attachment.attach"}, {"name": "实际返回值", "source": "087eccb2-6321-44f0-9490-440e1eb80b37-attachment.attach"}], "start": 1691056380892, "stop": 1691056380894}], "start": 1691056380878, "stop": 1691056380894}], "start": 1691056380754, "stop": 1691056380894}, {"name": "搜索自动化测试组织机构下的用户列表-根据姓名搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "9f6acd23-c445-4a58-ac26-aacfaa9b6278-attachment.attach"}, {"name": "请求地址", "source": "8c51ea3b-6992-468c-899d-41d54caed665-attachment.attach"}, {"name": "请求头", "source": "3c2e3f85-3ef0-4d8f-9e5f-e4987f1a07bf-attachment.attach"}, {"name": "请求参数", "source": "0595673c-db30-46b9-bec3-b135a6df019e-attachment.attach"}, {"name": "请求结果", "source": "43360ccf-74f8-4d9b-b8e9-141bb4447216-attachment.attach"}], "start": 1691056380904, "stop": 1691056380972}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "309ab0c5-807f-4754-a946-61ffcb746792-attachment.attach"}, {"name": "实际状态码", "source": "a3c25ce2-3e1d-4b8f-803e-895ee5958228-attachment.attach"}], "start": 1691056380972, "stop": 1691056380973}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "84d7d9b7-c109-4c96-8a67-89bab94cac10-attachment.attach"}, {"name": "实际返回值", "source": "f7e572a4-71d1-48ea-8be9-bae0180dabb3-attachment.attach"}], "start": 1691056380973, "stop": 1691056380974}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "ac8b1924-da3f-41b1-9553-9f9284634ee6-attachment.attach"}, {"name": "实际实际结果", "source": "29a432bf-5469-4773-a5aa-252dfad444d7-attachment.attach"}], "start": 1691056380974, "stop": 1691056380975}], "start": 1691056380972, "stop": 1691056380975}], "start": 1691056380903, "stop": 1691056380977}, {"name": "创建自动化测试超级管理员", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "93a8ebd3-e213-4cc4-a9b9-66bad9495255-attachment.attach"}, {"name": "请求地址", "source": "b06b66c0-e936-4424-adc1-c532f1eca1e8-attachment.attach"}, {"name": "请求头", "source": "b953e29e-f13f-4d6b-8ba6-740ba5795b12-attachment.attach"}, {"name": "请求参数", "source": "49926261-6df4-4d34-b9e0-269d92f2947b-attachment.attach"}, {"name": "请求结果", "source": "1f963fe3-6bfc-4186-bee5-ccfee0426011-attachment.attach"}], "start": 1691056381013, "stop": 1691056381094}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "90d5b1d7-74b3-4306-9bff-a6a83a55a20a-attachment.attach"}, {"name": "实际状态码", "source": "b6c78442-306a-4ae3-ba13-2f481a29a66f-attachment.attach"}], "start": 1691056381094, "stop": 1691056381095}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "433cc3c4-60d8-4d93-a5b2-c228669a2c7b-attachment.attach"}, {"name": "实际返回值", "source": "4f504e4d-7d40-481e-97df-29d84272c6ed-attachment.attach"}], "start": 1691056381095, "stop": 1691056381096}], "start": 1691056381094, "stop": 1691056381096}], "start": 1691056380981, "stop": 1691056381096}, {"name": "管理员列表搜索-按登录名、角色名组合搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "65e610d2-b2a3-41f1-ab24-c945281c1bed-attachment.attach"}, {"name": "请求地址", "source": "23b8efb8-7b93-4215-897c-d5403c91cb7d-attachment.attach"}, {"name": "请求头", "source": "e86d0aea-3140-4be0-a41f-8bb30f169240-attachment.attach"}, {"name": "请求参数", "source": "890c0b3b-62ee-454b-88e6-26db8ff605d1-attachment.attach"}, {"name": "请求结果", "source": "832516da-923c-4d9b-95fc-0ba7c16d0361-attachment.attach"}], "start": 1691056381111, "stop": 1691056381168}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "04baaa20-30ed-4762-ac14-fd7c67ee74ef-attachment.attach"}, {"name": "实际状态码", "source": "afba45a9-32e7-4bdc-8da4-2db6258be1e1-attachment.attach"}], "start": 1691056381168, "stop": 1691056381169}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "c7aba9fa-e1a0-4206-b022-46a4c350d375-attachment.attach"}, {"name": "实际返回值", "source": "ed9b1b91-b50f-42bb-913e-c717a733f724-attachment.attach"}], "start": 1691056381169, "stop": 1691056381170}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "727caa54-9c2f-4482-b74a-f782e008b111-attachment.attach"}, {"name": "实际实际结果", "source": "d257dbea-7510-468a-8434-7bc6f4c16248-attachment.attach"}], "start": 1691056381170, "stop": 1691056381171}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "57072b5a-4e8a-43fe-a8dc-67a9b431b542-attachment.attach"}, {"name": "实际实际结果", "source": "5df89307-b972-4ff8-90b0-2cf9b7ec3888-attachment.attach"}], "start": 1691056381171, "stop": 1691056381171}], "start": 1691056381168, "stop": 1691056381171}], "start": 1691056381109, "stop": 1691056381173}, {"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 59, in excute_case\n    self.excute_apicase(api, api_casedata)\n  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 90, in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "a801045a-f0c0-4919-befc-c9bb693085b2-attachment.attach"}, {"name": "请求地址", "source": "82deb3b7-9a99-4056-891b-55eb4ab0256a-attachment.attach"}, {"name": "请求头", "source": "41260570-3b4b-41f3-a241-c220aa19cebe-attachment.attach"}, {"name": "请求参数", "source": "2ad82edf-57e2-48f9-b02e-90c63089d242-attachment.attach"}, {"name": "请求结果", "source": "8a88d7f0-226f-4146-b5b9-82e44957a19e-attachment.attach"}], "start": 1691056381179, "stop": 1691056381231}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "726a45e1-fbf3-4f63-a716-3509e7277c4c-attachment.attach"}, {"name": "实际状态码", "source": "9617358b-a706-45ca-b12d-2cdd054d41f7-attachment.attach"}], "start": 1691056381231, "stop": 1691056381232}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "150bc454-29da-45b9-b198-36c6452130be-attachment.attach"}, {"name": "实际返回值", "source": "349497d5-01c4-41e4-b59c-7756c49ebafa-attachment.attach"}], "start": 1691056381232, "stop": 1691056381234}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "614a9299-41db-4b73-b362-9a5cb97109b9-attachment.attach"}, {"name": "期望返回值", "source": "d43f61ae-ae18-4c55-bf55-5c2dd7aebe0b-attachment.attach"}, {"name": "实际返回值", "source": "defec327-4412-41d8-a841-9293e6f779f8-attachment.attach"}], "start": 1691056381243, "stop": 1691056381246}], "start": 1691056381231, "stop": 1691056381246}], "start": 1691056381177, "stop": 1691056381246}], "attachments": [{"name": "log", "source": "109e5a7d-9171-4307-90cd-4a3830266afa-attachment.txt", "type": "text/plain"}], "start": 1691056380368, "stop": 1691056381246, "uuid": "7e386f93-5789-4652-9afe-f6062633ea7f", "historyId": "a8eeb0ea7b5495c378bd9fe5d82caca9", "testCaseId": "2cc05bdd47264d0a6d036e2b95402968", "fullName": "testcases.test_cases.TestUserSync#test_businesscases", "labels": [{"name": "epic", "value": "系统管理"}, {"name": "feature", "value": "权限管理"}, {"name": "story", "value": "管理员配置"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_cases"}, {"name": "subSuite", "value": "TestUserSync"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "20716-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_cases"}]}