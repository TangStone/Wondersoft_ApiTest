{"name": "自动化测试管理员用户重置密码成功", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <test_cases.TestUserSync object at 0x000002684C7585E0>\ncase = 'useradminPasswdReset'\ncasedata = {'description': '自动化测试管理员用户重置密码成功', 'epic': '系统管理', 'feature': '权限管理', 'name': '自动化测试管理员用户重置密码成功', ...}\n\n    @pytest.mark.parametrize('case, casedata', readcase.ReadCase().get_case(businesscase_pathlist))\n    def test_businesscases(self, case, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========执行用例START：%s==========\", case)\n>       runcase.RunCase().excute_case(casedata)\n\ntestcases\\test_cases.py:44: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:59: in excute_case\n    self.excute_apicase(api, api_casedata)\ncommon\\runcase.py:90: in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.password', 'value': '394f481895a1c5bef3da3d0685f41453385ef0aa'}], 'sql': \"select password from `bms-general-aa`.t_sys_admin tsa where id = '3884E747-DD204A33-ABC8D2D3-79A5B4CD'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "自动化测试管理员用户重置密码成功", "steps": [{"name": "新增用户组-新增成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "d9b5acec-154c-442e-8dbf-05b7d626bd92-attachment.attach"}, {"name": "请求地址", "source": "f4bf7933-c40e-4a43-96f8-11ac448998eb-attachment.attach"}, {"name": "请求头", "source": "c118a10b-0c9d-4ed2-8487-906f4de48727-attachment.attach"}, {"name": "请求参数", "source": "14df1dc8-d2a0-494c-a120-5cbcd4b85373-attachment.attach"}, {"name": "请求结果", "source": "3976ff4b-f7c1-4a91-b311-d8dc728ddff6-attachment.attach"}], "start": 1691056374628, "stop": 1691056374699}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "3c331c94-d6bd-4838-82f5-3e743bf176f6-attachment.attach"}, {"name": "实际状态码", "source": "c7bf6357-bb6e-4618-aa30-5f9a32771112-attachment.attach"}], "start": 1691056374699, "stop": 1691056374701}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "c844f201-0777-44e0-8972-0cc80953198b-attachment.attach"}, {"name": "实际返回值", "source": "1b8f0778-918b-4207-ae28-5ad5fe769fee-attachment.attach"}], "start": 1691056374701, "stop": 1691056374702}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "42365275-e484-4420-acae-e5d0a40f9886-attachment.attach"}, {"name": "期望返回值", "source": "1c378a3c-ae52-40ef-a147-9ab087a93bd2-attachment.attach"}, {"name": "实际返回值", "source": "9ccb1a87-9330-4da5-ac45-3bbb61baf7e0-attachment.attach"}], "start": 1691056374725, "stop": 1691056374727}], "start": 1691056374699, "stop": 1691056374727}], "start": 1691056374608, "stop": 1691056374727}, {"name": "搜索一级组织机构下特定用户组信息", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "ca6417e9-b7d5-4af8-a8bd-6d60bcab680d-attachment.attach"}, {"name": "请求地址", "source": "c0b186c7-6b31-4c25-8df8-a6feb40620fc-attachment.attach"}, {"name": "请求头", "source": "c4deb07b-ba4b-4e3b-805d-e2cbe1e33368-attachment.attach"}, {"name": "请求参数", "source": "c5e2e7ac-98ed-4cd9-aac7-8afdef9d22f1-attachment.attach"}, {"name": "请求结果", "source": "7dc87862-30ba-4998-9792-115674f8458a-attachment.attach"}], "start": 1691056374734, "stop": 1691056374789}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "d7832869-8c9e-4c23-bee3-50a4fa8a2e00-attachment.attach"}, {"name": "实际状态码", "source": "863a1c88-78a2-4197-ba22-88f048138c72-attachment.attach"}], "start": 1691056374790, "stop": 1691056374790}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "0fee73b7-23b1-41e5-9a9a-856997979d65-attachment.attach"}, {"name": "实际返回值", "source": "a2c2dfb2-d5f2-4122-8010-5e14b4af58a9-attachment.attach"}], "start": 1691056374790, "stop": 1691056374791}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "ceb5ade3-7613-4b1d-bd1a-6535fdb2a35e-attachment.attach"}, {"name": "实际实际结果", "source": "e4441b1d-2f16-4c85-bcec-c6af6fd10186-attachment.attach"}], "start": 1691056374792, "stop": 1691056374792}], "start": 1691056374790, "stop": 1691056374792}], "start": 1691056374732, "stop": 1691056374794}, {"name": "自建用户组新增普通职员用户成功", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "1e795ffe-5559-4765-a097-d8161f7da698-attachment.attach"}, {"name": "请求地址", "source": "0579da8e-48b5-4b1b-8adf-d125cd8caee9-attachment.attach"}, {"name": "请求头", "source": "39a8ad38-afc9-4add-a07e-ab94cf76c447-attachment.attach"}, {"name": "请求参数", "source": "8d719ee3-4647-47c4-b5fc-05788112c302-attachment.attach"}, {"name": "请求结果", "source": "ab090624-fb79-4f6e-b440-d6fd13918801-attachment.attach"}], "start": 1691056374823, "stop": 1691056374910}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "a4ce04aa-c9de-428d-8e0a-7115d21aef65-attachment.attach"}, {"name": "实际状态码", "source": "1ffb695d-756a-4c5d-835c-7f344ccdf50c-attachment.attach"}], "start": 1691056374910, "stop": 1691056374911}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "fa5ed4a2-a9cc-451d-ac07-8d85445aeae0-attachment.attach"}, {"name": "实际返回值", "source": "b3208cba-fbdd-42ff-9d7f-d749ddc3c531-attachment.attach"}], "start": 1691056374911, "stop": 1691056374912}, {"name": "数据库校验校验", "status": "passed", "attachments": [{"name": "查询sql", "source": "fa8938ea-0003-4eca-9a7f-3cd39c46246c-attachment.attach"}, {"name": "期望返回值", "source": "099d2d7c-550e-4b95-98d8-f1a1fa70a9ef-attachment.attach"}, {"name": "实际返回值", "source": "07398663-2d0d-4c0c-9890-739ac7871012-attachment.attach"}], "start": 1691056374948, "stop": 1691056374950}], "start": 1691056374910, "stop": 1691056374950}], "start": 1691056374802, "stop": 1691056374950}, {"name": "搜索自动化测试组织机构下的用户列表-根据姓名搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "e451baae-839f-4e6c-a11d-876c865995b5-attachment.attach"}, {"name": "请求地址", "source": "e8a49a4d-e125-46ce-acfb-8cf7388a3189-attachment.attach"}, {"name": "请求头", "source": "8f6bb986-ccb4-43e0-bc12-73d9bce14708-attachment.attach"}, {"name": "请求参数", "source": "a501c1e7-5f7d-4507-bc84-042529393c1d-attachment.attach"}, {"name": "请求结果", "source": "5f2b027c-d0b3-4fff-89db-6d26ccfad8e3-attachment.attach"}], "start": 1691056374960, "stop": 1691056375035}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "32eea03b-e61f-4f9a-8739-88fcf932d41e-attachment.attach"}, {"name": "实际状态码", "source": "679e89c2-16b1-4c38-ab66-26efb60ef672-attachment.attach"}], "start": 1691056375035, "stop": 1691056375036}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "4b785d5b-a5b5-49e2-9d7f-39621b4e19b5-attachment.attach"}, {"name": "实际返回值", "source": "f0971810-7ec6-4a9d-8e24-436c35bde00a-attachment.attach"}], "start": 1691056375036, "stop": 1691056375037}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "3322381b-b722-4552-8ddb-bf258e2523e2-attachment.attach"}, {"name": "实际实际结果", "source": "57aa29b5-b85f-4f85-9a42-b88089145d98-attachment.attach"}], "start": 1691056375038, "stop": 1691056375039}], "start": 1691056375035, "stop": 1691056375039}], "start": 1691056374958, "stop": 1691056375042}, {"name": "创建自动化测试超级管理员", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "7ea53401-f336-44b4-8cfd-9623e9a70cf0-attachment.attach"}, {"name": "请求地址", "source": "11f7e52e-4fc8-4fc8-9fbc-536f3d0cfdcc-attachment.attach"}, {"name": "请求头", "source": "6139f895-9c9e-4137-97c1-b7e221c3cec7-attachment.attach"}, {"name": "请求参数", "source": "47e21e80-ad74-4a5d-b186-d5620ec5d4fb-attachment.attach"}, {"name": "请求结果", "source": "c59967ee-d07c-4229-9955-6ae9c1498d0b-attachment.attach"}], "start": 1691056375080, "stop": 1691056375161}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "6405863d-9d8f-4c70-aba4-e32b67dfb57c-attachment.attach"}, {"name": "实际状态码", "source": "980eb4d8-84f7-49be-a8e8-ce1007015bdb-attachment.attach"}], "start": 1691056375161, "stop": 1691056375162}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "ad735551-4d5c-47af-8756-100900571db8-attachment.attach"}, {"name": "实际返回值", "source": "430b0950-433c-417d-92f9-615e2ab80cdf-attachment.attach"}], "start": 1691056375162, "stop": 1691056375163}], "start": 1691056375161, "stop": 1691056375163}], "start": 1691056375047, "stop": 1691056375163}, {"name": "管理员列表搜索-按登录名、角色名组合搜索", "status": "passed", "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "fec62244-9494-4887-a461-cb2c368f6a5f-attachment.attach"}, {"name": "请求地址", "source": "06a8500b-4571-4671-bd6c-dcef68886164-attachment.attach"}, {"name": "请求头", "source": "7c9836f5-0245-4865-8e13-65415d7afd7e-attachment.attach"}, {"name": "请求参数", "source": "a2725667-f807-4009-ac95-fbb9d169482e-attachment.attach"}, {"name": "请求结果", "source": "dfb72acc-07ec-4d01-b263-6f33437c6172-attachment.attach"}], "start": 1691056375174, "stop": 1691056375234}, {"name": "结果校验", "status": "passed", "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "10acb605-5d79-4f25-bfff-e9103a49430a-attachment.attach"}, {"name": "实际状态码", "source": "bdaa50c4-ef63-4b3f-b5eb-1a74e947e0ff-attachment.attach"}], "start": 1691056375235, "stop": 1691056375235}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "59d548dc-f0b3-4c03-af2f-12b5d7cd7c28-attachment.attach"}, {"name": "实际返回值", "source": "bd42684c-d506-4614-b22f-68571d6e1fa4-attachment.attach"}], "start": 1691056375236, "stop": 1691056375236}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "e7a62c9f-dd0c-483a-98ea-889e000d180f-attachment.attach"}, {"name": "实际实际结果", "source": "1afc725d-02c2-470c-ac84-8df84944fc85-attachment.attach"}], "start": 1691056375237, "stop": 1691056375237}, {"name": "json断言判断包含", "status": "passed", "attachments": [{"name": "期望结果", "source": "2563be3d-7d17-4d85-99cf-6ad91c82aa12-attachment.attach"}, {"name": "实际实际结果", "source": "69d31336-3c06-4870-9951-8bd1d67aeaaf-attachment.attach"}], "start": 1691056375237, "stop": 1691056375238}], "start": 1691056375235, "stop": 1691056375238}], "start": 1691056375173, "stop": 1691056375240}, {"name": "自动化测试管理员用户修改密码成功", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 59, in excute_case\n    self.excute_apicase(api, api_casedata)\n  File \"E:\\Wondersoft_ApiTest\\common\\runcase.py\", line 90, in excute_apicase\n    checkresult.check_result(hope_result, recv_data, recv_code)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "请求方法：", "source": "7996e891-8ca7-4f5c-8a02-0443d4014417-attachment.attach"}, {"name": "请求地址", "source": "c6c1f357-2326-4417-8a0f-198bc9fb2e56-attachment.attach"}, {"name": "请求头", "source": "bd9b0f05-8c03-48be-8d95-ec68b61d3b16-attachment.attach"}, {"name": "请求参数", "source": "962f7117-d8c4-4d4d-a3b5-96c027182c0d-attachment.attach"}, {"name": "请求结果", "source": "c3355240-777d-48ba-92de-9cf595875333-attachment.attach"}], "start": 1691056375247, "stop": 1691056375313}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "6d646d2e-5b38-4028-9bcd-00e5d9b01393-attachment.attach"}, {"name": "实际状态码", "source": "51c30838-7c44-428c-b690-d8c3934ecc53-attachment.attach"}], "start": 1691056375313, "stop": 1691056375314}, {"name": "返回值校验", "status": "passed", "attachments": [{"name": "期望返回值", "source": "31d6c890-1f4e-4c15-871d-b07aa33253d7-attachment.attach"}, {"name": "实际返回值", "source": "6360a6f5-ff1f-4114-86a0-9b2a3da70e84-attachment.attach"}], "start": 1691056375314, "stop": 1691056375318}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "46674105-7945-41a9-a0b0-ec14ba316e1b-attachment.attach"}, {"name": "期望返回值", "source": "081dc7e6-652a-451a-a5dc-e3dd8b39a1ee-attachment.attach"}, {"name": "实际返回值", "source": "ca6a722a-49c3-46f7-b42f-23f1e45608ed-attachment.attach"}], "start": 1691056375325, "stop": 1691056375327}], "start": 1691056375313, "stop": 1691056375327}], "start": 1691056375244, "stop": 1691056375327}], "attachments": [{"name": "log", "source": "1f9b0df6-9750-4957-bce2-bc4f369b3588-attachment.txt", "type": "text/plain"}], "start": 1691056374461, "stop": 1691056375327, "uuid": "57a4da6b-b6ba-4d10-848b-a890ab5adb2f", "historyId": "a8eeb0ea7b5495c378bd9fe5d82caca9", "testCaseId": "2cc05bdd47264d0a6d036e2b95402968", "fullName": "testcases.test_cases.TestUserSync#test_businesscases", "labels": [{"name": "epic", "value": "系统管理"}, {"name": "feature", "value": "权限管理"}, {"name": "story", "value": "管理员配置"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_cases"}, {"name": "subSuite", "value": "TestUserSync"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "20716-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_cases"}]}