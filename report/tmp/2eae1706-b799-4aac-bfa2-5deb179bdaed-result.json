{"name": "新增用户组-特殊字符校验", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <bms.testcases.test_04_user.TestUser object at 0x00000233A91B4DF0>, caseid = 'user_group_add_05'\ncasedata = {'base_url': '${config(host)}', 'caseid': 'user_group_add_05', 'description': '新增用户组，用户组名称存在特殊字符，新增失败，提示信息正确', 'epic': '用户管理', ...}\n\n    @pytest.mark.parametrize('caseid, casedata', [(caseid, casedata) for caseid, casedata in\n                                                  readcase.ReadCase().get_case_dict(\n                                                      ROOT_DIR + 'bms/data/user/user_group_add.yaml').items()])\n    def test_user_group_add(self, caseid, casedata):\n        handleallure.allure_display(casedata)\n        logging.info(\"==========开始执行用例：%s==========\", caseid)\n>       runcase.excute_case(casedata)\n\nbms\\testcases\\test_04_user.py:38: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\runcase.py:55: in excute_case\n    checkresult.check_result(hope_result, recv_data, recv_code)\ncommon\\checkresult.py:33: in check_result\n    assert_db(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nhope_res = [{'result': [{'path': '$.count', 'value': 0}], 'sql': \"select count(*) as count from `bms-general-uba`.t_group_info where groupName = '自动化测试根组……&%' and isRemoved = '0'\", 'type': 'mysql'}]\n\n    def assert_db(hope_res):\n        \"\"\"\n        数据库校验\n        :param hope_res:\n        :return:\n        \"\"\"\n        if hope_res:\n            for dbcheck_data in hope_res:\n                db_type = dbcheck_data['type']  # 数据库类型\n                db_sql = dbcheck_data['sql']\n                if db_type == 'mysql':\n                    if db_sql[0:6].upper() == 'SELECT':\n                        sql_date = database.MysqlConn().mysql_query(db_sql)\n                        with allure.step(\"数据库校验校验\"):\n                            for param in dbcheck_data['result']:\n                                sql_value = jsonpath.jsonpath(sql_date, param['path'])\n                                value = param['value']\n                                try:\n                                    allure.attach(name=\"查询sql\", body=str(db_sql))\n                                    allure.attach(name=\"期望返回值\", body=str(value))\n                                    if sql_value:\n                                        allure.attach(name='实际返回值', body=str(sql_value[0]))\n>                                       assert str(value) == str(sql_value[0])\nE                                       AssertionError\n\ncommon\\checkresult.py:57: AssertionError"}, "description": "新增用户组，用户组名称存在特殊字符，新增失败，提示信息正确", "steps": [{"name": "执行当前接口：新增用户组-特殊字符校验", "status": "passed", "attachments": [{"name": "请求方法：", "source": "07361778-7e9b-4cd0-8a82-094fa8fd5869-attachment.attach"}, {"name": "请求地址", "source": "9513b9f5-b30a-4bac-a01e-ce8cf24eddce-attachment.attach"}, {"name": "请求头", "source": "622f0e8c-e1af-4901-a8d1-eda8598df644-attachment.attach"}, {"name": "请求参数", "source": "475b4b5a-91a9-458e-b76a-ccedf8f74ecb-attachment.attach"}, {"name": "请求结果", "source": "c547004f-2f0e-43fa-ac57-c6efe2966dd9-attachment.attach"}], "start": 1687942586390, "stop": 1687942586470}, {"name": "结果校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 33, in check_result\n    assert_db(value)\n  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "steps": [{"name": "状态码校验", "status": "passed", "attachments": [{"name": "期望状态码", "source": "499dc1e0-1f95-4ee7-8586-b2d18aa288be-attachment.attach"}, {"name": "实际状态码", "source": "cd80269e-ef66-4a17-98a3-0cf715bedb3f-attachment.attach"}], "start": 1687942586470, "stop": 1687942586471}, {"name": "数据库校验校验", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"E:\\Wondersoft_ApiTest\\common\\checkresult.py\", line 57, in assert_db\n    assert str(value) == str(sql_value[0])\n"}, "attachments": [{"name": "查询sql", "source": "fb0b9abb-930e-4a32-93b0-05e42b548e6f-attachment.attach"}, {"name": "期望返回值", "source": "ea1e60f4-f427-43e9-a459-73d9176bea5f-attachment.attach"}, {"name": "实际返回值", "source": "e6e4ac75-4b84-495b-85d0-99c0a287f679-attachment.attach"}], "start": 1687942586476, "stop": 1687942586478}], "start": 1687942586470, "stop": 1687942586478}], "attachments": [{"name": "log", "source": "af76e6c1-48a4-4e3e-9c26-330c61f94b73-attachment.txt", "type": "text/plain"}], "start": 1687942586382, "stop": 1687942586478, "uuid": "fcebece9-f35e-47c4-aa56-8a8b3ddf0c1e", "historyId": "05c4baabf07ce16940066db47c892f8b", "testCaseId": "1b4de3d4d564c70083b4f26b87493cfc", "fullName": "bms.testcases.test_04_user.TestUser#test_user_group_add", "labels": [{"name": "epic", "value": "用户管理"}, {"name": "feature", "value": "基础数据管理-用户与机构管理"}, {"name": "story", "value": "新增用户组接口"}, {"name": "parentSuite", "value": "bms.testcases"}, {"name": "suite", "value": "test_04_user"}, {"name": "subSuite", "value": "TestUser"}, {"name": "host", "value": "OFYI7JX9DURTDV6"}, {"name": "thread", "value": "14556-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "bms.testcases.test_04_user"}]}