epic: 用户管理
feature: 用户同步管理-用户同步
story: 新增数据源配置接口
case:
  usersync_config_add_01:
    name: 新增数据源配置成功
    base_url: ${config(bms_env,host)}
    request:
      method: put
      url: /api/usersync/v1/config
      headers:
        Content-Type: application/json
        token: ${extract(token)}
        Referer: ${config(bms_env,host)}/sub-app-unity/userSync
      data: {"type": "domain","name": "70.235","configs": "{\"name\":\"70.235\",\"host\":\"192.168.70.235\",\"port\":\"389\",\"username\":\"xiantest\\\\administrator\",\"password\":\"Ws-123456abc\",\"base\":\"DC=xiantest,DC=com\",\"org\":\"ou=北京明朝万达\",\"isEncrypt\":false,\"userFilter\":\"\",\"groupFilter\":\"\",\"isIncrement\":false}","relations": "{\"sourceUUID\":\"objectGUID\",\"groupLabel\":\"ou\",\"groupName\":\"name\",\"userLabel\":\"cn\",\"userName\":\"sAMAccountName\",\"userSid\":\"objectSid\"}"}
#      data: {"relations": "{\"sourceUUID\":\"objectGUID\",\"groupLabel\":\"ou\",\"groupName\":\"name\",\"userLabel\":\"cn\",\"userName\":\"sAMAccountName\",\"userSid\":\"objectSid\"}"}
    expect:
      code: 200
      jsonpath:
        - path: $.statusCode
          value: 0
          asserttype: ==
        - path: $.msg
          value: success
          asserttype: ==